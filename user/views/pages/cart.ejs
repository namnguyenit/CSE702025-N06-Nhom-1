<%- include('../partials/header', { title: 'Giỏ hàng' }) %>
<div class="container mt-5">
    <h2>Giỏ hàng của bạn</h2>
    <% if (cart && cart.length > 0) { %>
        <form action="/cart/checkout" method="POST">
        <table class="table table-bordered mt-3">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Loại</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                <% cart.forEach(item => { %>
                    <tr>
                        <td><%= item.productID.name %></td>
                        <td><%= item.productID.type %></td>
                        <td><%= item.productID.detail[0] ? item.productID.detail[0].price : 'N/A' %></td>
                        <td><%= item.orderNumber %></td>
                        <td><%= item.productID.detail[0] ? (item.productID.detail[0].price * item.orderNumber) : 0 %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <button type="submit" class="btn btn-success">Thanh toán toàn bộ giỏ hàng</button>
        </form>
    <% } else { %>
        <p>Bạn chưa có sản phẩm nào trong giỏ hàng.</p>
    <% } %>
</div>
<%- include('../partials/footer') %>
